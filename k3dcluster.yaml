# yaml-language-server: $schema=https://raw.githubusercontent.com/rancher/k3d/main/pkg/config/config.versions.schema.json
apiVersion: k3d.io/v1alpha5
kind: Simple
metadata:
  name: homelab
options:
  k3d:
    wait: true
  kubeconfig:
    updateDefaultKubeconfig: true
    switchCurrentContext: true
volumes:
  - volume: ${PWD}/k3d/manifests:/var/lib/rancher/k3s/server/manifests/homlab-bootstrap
    nodeFilters:
      - "server:*"
  # ArgoCD Applications
  - volume: ${PWD}:/apps
    # nodeFilters:
    #   - "*"
ports:
  - port: 8080:80 # same as `--port '8080:80@loadbalancer'`
    nodeFilters:
      - loadbalancer
